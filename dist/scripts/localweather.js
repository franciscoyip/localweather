var LocalWeather=function(){function e(){var e="http://ip-api.com/json";return $.ajax({url:e,success:function(e){u=e}})}function t(){var e="http://api.openweathermap.org/data/2.5/weather",t={appid:"fb36908083a2abc1d964a40f6a769a4a"};if(null!==u)return t.q=[u.city,u.region,u.countryCode].join(","),$.ajax({url:e,data:t,success:function(e){d=e}})}function n(e,t){switch(t){case"F":e=9*e/5-457.87;break;case"C":e-=273.15;break;default:return e}return e.toFixed(2)}function r(e){return"http://openweathermap.org/img/w/"+e+".png"}function a(e){var t=new Date(0);return t.setUTCSeconds(parseInt(e)),t}function i(){if(null!==u){null===p&&o(),p.$location.html(u.city+", "+u.region);var e=d.main.temp;e=n(e,l),p.$degree.html(e),p.$unit.html("&deg;"+l),p.$degreeControl.each(function(e,t){var n=$(t);if(n.val()===l)return void n.prop("checked",!0)});var t=r(d.weather[0].icon);p.$icon.empty().append($("<img>").attr({src:t}).css({width:"100px"})),p.$description.html(d.weather[0].main);var i=a(d.dt);p.$timestamp.html(i.toString("MMMM dS, yyyy HH:mm")),p.$weather.removeClass("default")}}function o(){var e=$(".weather");p={$location:$("#location"),$weather:e,$degree:e.find(".degree"),$unit:e.find(".unit"),$icon:e.find(".icon"),$description:e.find(".description"),$timestamp:e.find(".timestamp"),$degreeControl:e.find(".degree-control input[type=radio]")},p.$degreeControl.on("click",c)}function c(){l=p.$degreeControl.filter(":checked").get(0).value,i()}var u=null,d=null,l="F",p=null;return{getCurrentLocation:e,getCurrentWeather:t,renderUI:i}}();